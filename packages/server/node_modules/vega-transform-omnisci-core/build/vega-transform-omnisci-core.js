var e=require("vega");function s(s){e.Transform.call(this,[],s)}s.session=function(e){return e?(this._session=e,this):this._session},s.Definition={type:"QueryCore",metadata:{changes:!0,source:!0},params:[{name:"query",type:"string",required:!0}]},e.inherits(s,e.Transform).transform=function(r,n){try{var i=this;if(!s._session)throw Error("OmniSci Core session missing. Please assign it to the vega transform by calling `QueryCore.session(session).`");return Promise.resolve(s._session.queryAsync(r.query)).then(function(s){s.forEach(e.ingest);var r=n.fork(n.NO_FIELDS&n.NO_SOURCE);return r.rem=i.value,i.value=r.add=r.source=s,r})}catch(e){return Promise.reject(e)}},module.exports=s;
//# sourceMappingURL=vega-transform-omnisci-core.js.map
