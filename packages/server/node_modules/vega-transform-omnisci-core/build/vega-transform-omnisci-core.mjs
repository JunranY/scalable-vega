import{Transform as e,inherits as s,ingest as r}from"vega";function i(s){e.call(this,[],s)}i.session=function(e){return e?(this._session=e,this):this._session},i.Definition={type:"QueryCore",metadata:{changes:!0,source:!0},params:[{name:"query",type:"string",required:!0}]},s(i,e).transform=function(e,s){try{var n=this;if(!i._session)throw Error("OmniSci Core session missing. Please assign it to the vega transform by calling `QueryCore.session(session).`");return Promise.resolve(i._session.queryAsync(e.query)).then(function(e){e.forEach(r);var i=s.fork(s.NO_FIELDS&s.NO_SOURCE);return i.rem=n.value,n.value=i.add=i.source=e,i})}catch(e){return Promise.reject(e)}};export default i;
//# sourceMappingURL=vega-transform-omnisci-core.mjs.map
