import{Transform as s,inherits as e,ingest as i}from"vega";function r(e){s.call(this,[],e)}r.session=function(s){return s?(this._session=s,this):this._session},r.Definition={type:"QueryCore",metadata:{changes:!0,source:!0},params:[{name:"query",type:"string",required:!0}]},e(r,s).transform=async function(s,e){if(!r._session)throw Error("OmniSci Core session missing. Please assign it to the vega transform by calling `QueryCore.session(session).`");const n=await r._session.queryAsync(s.query);n.forEach(i);const o=e.fork(e.NO_FIELDS&e.NO_SOURCE);return o.rem=this.value,this.value=o.add=o.source=n,o};export default r;
//# sourceMappingURL=vega-transform-omnisci-core.modern.js.map
